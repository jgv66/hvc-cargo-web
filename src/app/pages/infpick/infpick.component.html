<form (ngSubmit)="consultar()">
    <div class="form-row mt-2 mb-2">
        <div class="col-2">
            <mat-form-field color="accent" appearance="">
                <mat-label>Fecha inicial</mat-label>
                <input matInput [matDatepicker]="picker" name="fechaIni" [(ngModel)]="fechaIni">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="col-2">
            <mat-form-field color="accent" appearance="">
                <mat-label>Fecha final</mat-label>
                <input matInput [matDatepicker]="picker2" name="fechaFin" [(ngModel)]="fechaFin">
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
            </mat-form-field>
        </div>
        <div class="col-2">
            <button type="submit" class="btn btn-primary">Buscar Encomiendas</button>
        </div>
        <div class="col-4" *ngIf=" retiros?.length > 0 ">
            <mat-form-field *ngIf=" retiros?.length > 0 ">
                <mat-label>Filtrar</mat-label>
                <input matInput (keyup)="aplicarFiltro( $event )" name="filtro" [(ngModel)]="filtro" placeholder="digite algo..." #input>
                <button mat-button *ngIf="filtro" matSuffix mat-icon-button aria-label="Clear" (click)="filtro=''">
                    <mat-icon>close</mat-icon>
                  </button>
            </mat-form-field>
        </div>
        <div class="col-2" *ngIf=" retiros?.length > 0 ">
            <button type="button" class="btn btn-primary" (click)="exportar()">Exportar a Excel</button>
        </div>
    </div>
</form>

<div class="progress" style="height: 8px;" *ngIf=" cargando">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<!-- encomiendas -->
<div>
    <div class="mat-elevation-z8">

        <table mat-table [dataSource]="dataSource">

            <ng-container matColumnDef="id_paquete">
                <th mat-header-cell *matHeaderCellDef><b> #ID </b></th>
                <td mat-cell *matCellDef="let item"> <b>#{{item.id_paquete}}</b> </td>
            </ng-container>

            <ng-container matColumnDef="fecha_creacion">
                <th mat-header-cell *matHeaderCellDef><b> Fecha </b></th>
                <td mat-cell *matCellDef="let item"> {{item.fecha_creacion}} </td>
            </ng-container>

            <ng-container matColumnDef="obs_carga">
                <th mat-header-cell *matHeaderCellDef><b> Encomienda </b></th>
                <td mat-cell *matCellDef="let item"> {{item.obs_carga}} </td>
            </ng-container>

            <ng-container matColumnDef="cli_razon">
                <th mat-header-cell *matHeaderCellDef><b> Cliente </b></th>
                <td mat-cell *matCellDef="let item"> {{item.cli_razon}} </td>
            </ng-container>

            <ng-container matColumnDef="des_razon">
                <th mat-header-cell *matHeaderCellDef><b> Destinatario </b></th>
                <td mat-cell *matCellDef="let item"> {{item.des_razon}} </td>
            </ng-container>

            <ng-container matColumnDef="tipo_pago">
                <th mat-header-cell *matHeaderCellDef><b> Cobro </b></th>
                <td mat-cell *matCellDef="let item"> {{item.tipo_pago}} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
                <th mat-header-cell *matHeaderCellDef><b> Estado </b></th>
                <td mat-cell *matCellDef="let item"> {{item.estado}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)"></tr>

            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">No existen datos que coincidan con el filtro "{{input.value}}"</td>
            </tr>

        </table>

        <mat-paginator [length]="retiros.length" [pageSize]="pageSize" [pageSizeOptions]="[12, 24, 50]" showFirstLastButtons></mat-paginator>

    </div>
</div>